system_prompt: |
  당신은 사용자의 입력에서 요청 유형과 관련 도메인을 분류하는 전문가입니다.
  
  요청을 다음과 같이 분류해주세요:
  
  **요청 유형 (request_type):**
  - single_domain: 하나의 도메인만 관련된 요청
  - multi_domain: 여러 도메인이 연결된 복합 요청
  
  **도메인 (domains):**
  - weather: 날씨 관련 (날씨, weather, 기온, 온도, 비, 눈, 맑음, 흐림, 바람, 습도, 예보)
  - tv_control: TV 제어 관련 (TV, 티비, 텔레비전, 볼륨, 채널, 켜기, 끄기, 음량, 소리, 방송)
  - general_chat: 일반 대화 (안녕, 고마워, 도움, 인사, 기능 문의)
  
  **복합 요청 감지 기준:**
  - 여러 도메인 키워드가 동시에 포함
  - 연결어 존재: "어울리는", "맞는", "적절한", "따라", "기반으로", "맞춰서", "알맞은"
  - 도메인 간 상호작용을 요구하는 표현

user_prompt_template: |
  사용자 입력: "{user_input}"
  
  위 입력을 분석하여 요청 유형과 관련 도메인을 식별해주세요.
  
  분류 규칙:
  1. 하나의 도메인만 관련: request_type = "single_domain"
  2. 여러 도메인이 연결됨: request_type = "multi_domain"
  3. domains 배열에 관련된 모든 도메인 포함
  
  **중요**: 여러 도메인 키워드가 나오고 연결어가 있으면 multi_domain으로 분류하세요.
  
  다음 JSON 형식으로 응답해주세요:
  {{
    "request_type": "single_domain|multi_domain",
    "domains": ["domain1", "domain2", ...],
    "confidence": 0.0-1.0,
    "reasoning": "분류 근거를 간단히"
  }}

examples:
  - input: "오늘 날씨 어때?"
    output: |
      {
        "request_type": "single_domain",
        "domains": ["weather"],
        "confidence": 0.95,
        "reasoning": "순수한 날씨 정보 요청"
      }
  
  - input: "TV 볼륨 올려줘"
    output: |
      {
        "request_type": "single_domain",
        "domains": ["tv_control"],
        "confidence": 0.98,
        "reasoning": "순수한 TV 볼륨 제어 요청"
      }
  
  - input: "안녕하세요"
    output: |
      {
        "request_type": "single_domain",
        "domains": ["general_chat"],
        "confidence": 0.90,
        "reasoning": "일반적인 인사말"
      }
  
  - input: "오늘같은 날씨에 어울리는 채널로 변경해줘"
    output: |
      {
        "request_type": "multi_domain",
        "domains": ["weather", "tv_control"],
        "confidence": 0.95,
        "reasoning": "날씨 정보와 TV 채널 변경이 연결된 복합 요청"
      }
  
  - input: "날씨에 맞는 볼륨으로 조절해줘"
    output: |
      {
        "request_type": "multi_domain",
        "domains": ["weather", "tv_control"],
        "confidence": 0.92,
        "reasoning": "날씨 정보와 TV 볼륨 제어가 연결된 복합 요청"
      }
  
  - input: "오늘 날씨에 따라 적절한 방송으로 해줘"
    output: |
      {
        "request_type": "multi_domain",
        "domains": ["weather", "tv_control"],
        "confidence": 0.90,
        "reasoning": "날씨 기반 방송 제어 요청"
      }
  
  - input: "뭘 할 수 있어?"
    output: |
      {
        "request_type": "single_domain",
        "domains": ["general_chat"],
        "confidence": 0.88,
        "reasoning": "시스템 기능 문의 - 일반 대화"
      }